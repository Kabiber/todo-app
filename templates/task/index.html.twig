{% extends 'base.html.twig' %}

{% block title %}Лист задач{% endblock %}

{% block body %}
    <h1 class="text-center mb-4 space-mono-bold">Лист задач</h1>

    <a href="{{ path('task_create') }}" class="btn btn-primary d-block mb-3 space-mono-regular">Создать новую задачу</a>

    <ul class="list-unstyled">
        {% for task in tasks %}
            <li class="task-item {% if task.isCompleted %}completed{% endif %}">
                <strong class="space-mono-bold">{{ task.title }}</strong> -
                <span class="space-mono-regular">{{ task.description }}</span>
                <div class="mt-2 d-flex justify-content-between align-items-center">
                    <div>
                        <a href="{{ path('task_edit', { id: task.id }) }}" class="btn btn-sm btn-warning me-2 space-mono-regular">Изменить</a>
                        <a href="{{ path('task_delete', { id: task.id }) }}" class="btn btn-sm btn-danger space-mono-regular">Удалить</a>
                    </div>
                    <form action="{{ path('task_toggle_status', { id: task.id }) }}" method="post" style="display: inline;">
                        <button type="submit" class="btn btn-sm {% if task.isCompleted %}btn-success{% else %}btn-secondary{% endif %} space-mono-regular">
                            {% if task.isCompleted %}
                                Не выполнено
                            {% else %}
                                Выполнено
                            {% endif %}
                        </button>
                    </form>
                </div>
            </li>
        {% else %}
            <p class="text-center space-mono-regular">Нет задач.</p>
        {% endfor %}
    </ul>
{% endblock %}